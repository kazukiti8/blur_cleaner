<!doctype html>
<html lang="ja"><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>blur_cleaner report</title>
<style>
:root{
  --thumb-size: 256px; /* JSで切り替え */
}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans,Arial,sans-serif;margin:16px;color:#222;}
h1{font-size:20px;margin:0 0 12px}
h2{font-size:16px;margin:24px 0 8px;border-bottom:1px solid #ddd;padding-bottom:4px}
.meta{color:#666;font-size:12px}
.controls{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin:12px 0 8px}
.controls .group{display:flex;gap:8px;align-items:center;font-size:13px;color:#444}
input[type="number"]{width:80px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}
.card{border:1px solid #ddd;border-radius:8px;padding:8px;background:#fff}
.card.keep{border-color:#2e7d32}
.badge{display:inline-block;padding:2px 6px;border-radius:999px;font-size:11px;background:#eee;margin-right:6px}
.badge.keep{background:#e8f5e9;color:#2e7d32;border:1px solid #c8e6c9}
.badge.cand{background:#fff3e0;color:#ef6c00;border:1px solid #ffe0b2}
figure{margin:0}
figcaption{font-size:12px;color:#555;margin-top:4px;word-break:break-all}
.thumb{width:100%;height:auto;border:1px solid #eee;border-radius:4px;object-fit:contain;background:#fafafa;max-height:var(--thumb-size)}
.small{font-size:12px;color:#666}
code{background:#f6f8fa;border-radius:4px;padding:0 4px}
.kv{font-size:12px;color:#444}
.kv b{color:#222}
.hide-in-visual .card.in-visual{display:none}

/* 視覚的わかりやすさ：ブレ強度で色分け（境界値はJSからclass付与） */
.card.blur-strong{box-shadow:0 0 0 2px rgba(239,83,80,.35) inset}
.card.blur-mid{box-shadow:0 0 0 2px rgba(255,160,0,.30) inset}
.card.blur-weak{box-shadow:0 0 0 2px rgba(102,187,106,.25) inset}
</style></head><body>
<h1>blur_cleaner report</h1>
<div class="meta">source: <code>D:\blur_cleaner\report.csv</code> · thumbs: <code>D:\blur_cleaner\report_assets\thumbs</code> · visual groups: 1 · blur singles: 19</div>

<div class="controls">
  <div class="group">
    <label><input id="toggleHide" type="checkbox"> Blur一覧から Visual に含まれる項目を隠す</label>
  </div>
  <div class="group">
    サムネ: 
    <label><input type="radio" name="thumb" value="160">小</label>
    <label><input type="radio" name="thumb" value="256" checked>中</label>
    <label><input type="radio" name="thumb" value="384">大</label>
  </div>
  <div class="group">
    並び替え(Blur): 
    <select id="blurSort">
      <option value="lap_asc">スコア↑（よりブレ）</option>
      <option value="lap_desc">スコア↓（ブレ弱）</option>
      <option value="name_asc">ファイル名A→Z</option>
      <option value="name_desc">ファイル名Z→A</option>
      <option value="path_asc">パスA→Z</option>
      <option value="path_desc">パスZ→A</option>
    </select>
  </div>
  <div class="group">
    フィルタ(Blur): lap_var ≤ <input id="blurMax" type="number" min="0" step="1" value="">
    <button id="clearFilter">クリア</button>
  </div>
  <div class="group">
    検索: <input id="search" type="text" placeholder="ファイル名/パスで絞り込み">
  </div>
</div>


        <h2>Visual Groups（duplicate+similar）</h2>
        <h2>Visual Group: <code>52d8fd43ee16d217a3604da612874c9f6d1609c8e2d85f920e88bbcf428ab9f8</code></h2><div class="grid">
        <a class="card keep in-visual" href="file:///D%3A/tests/21737.jpg" target="_blank" title="D:\tests\21737.jpg" data-name="21737.jpg" data-path="D:\tests\21737.jpg">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21737.jpg.jpg" alt="21737.jpg">
            <figcaption><span class="badge keep">keep</span><span class="kv"><b>21737.jpg</b> · 4032×3024</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate in-visual" href="file:///D%3A/tests/21737%20-%20%E3%82%B3%E3%83%94%E3%83%BC.jpg" target="_blank" title="D:\tests\21737 - コピー.jpg" data-name="21737 - コピー.jpg" data-path="D:\tests\21737 - コピー.jpg">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21737 - コピー.jpg.jpg" alt="21737 - コピー.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21737 - コピー.jpg</b> · 4032×3024</span> · <span class="small">same_sha</span></figcaption>
          </figure>
        </a>
        </div>
        <h2>Blur Singles（ブレ単独）</h2>
        <div id="blurGrid" class="grid">
        <a class="card candidate in-visual blur blur-strong" href="file:///D%3A/tests/21737%20-%20%E3%82%B3%E3%83%94%E3%83%BC.jpg" target="_blank" title="D:\tests\21737 - コピー.jpg" data-name="21737 - コピー.jpg" data-path="D:\tests\21737 - コピー.jpg" data-lap="27.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21737 - コピー.jpg.jpg" alt="21737 - コピー.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21737 - コピー.jpg</b> · 4032×3024</span> · <span class="small">lap_var=27.9</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate in-visual blur blur-strong" href="file:///D%3A/tests/21737.jpg" target="_blank" title="D:\tests\21737.jpg" data-name="21737.jpg" data-path="D:\tests\21737.jpg" data-lap="27.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21737.jpg.jpg" alt="21737.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21737.jpg</b> · 4032×3024</span> · <span class="small">lap_var=27.9</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-strong" href="file:///D%3A/tests/21739.jpg" target="_blank" title="D:\tests\21739.jpg" data-name="21739.jpg" data-path="D:\tests\21739.jpg" data-lap="19.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21739.jpg.jpg" alt="21739.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21739.jpg</b> · 2302×4096</span> · <span class="small">lap_var=19.6</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-strong" href="file:///D%3A/tests/21740.jpg" target="_blank" title="D:\tests\21740.jpg" data-name="21740.jpg" data-path="D:\tests\21740.jpg" data-lap="30.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21740.jpg.jpg" alt="21740.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21740.jpg</b> · 4032×3024</span> · <span class="small">lap_var=30.0</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-strong" href="file:///D%3A/tests/21741.jpg" target="_blank" title="D:\tests\21741.jpg" data-name="21741.jpg" data-path="D:\tests\21741.jpg" data-lap="21.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21741.jpg.jpg" alt="21741.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21741.jpg</b> · 4032×3024</span> · <span class="small">lap_var=21.6</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-strong" href="file:///D%3A/tests/21742.jpg" target="_blank" title="D:\tests\21742.jpg" data-name="21742.jpg" data-path="D:\tests\21742.jpg" data-lap="13.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21742.jpg.jpg" alt="21742.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21742.jpg</b> · 4032×3024</span> · <span class="small">lap_var=13.7</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-strong" href="file:///D%3A/tests/21744.jpg" target="_blank" title="D:\tests\21744.jpg" data-name="21744.jpg" data-path="D:\tests\21744.jpg" data-lap="15.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21744.jpg.jpg" alt="21744.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21744.jpg</b> · 4032×3024</span> · <span class="small">lap_var=15.5</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-strong" href="file:///D%3A/tests/21745.jpg" target="_blank" title="D:\tests\21745.jpg" data-name="21745.jpg" data-path="D:\tests\21745.jpg" data-lap="9.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21745.jpg.jpg" alt="21745.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21745.jpg</b> · 4032×3024</span> · <span class="small">lap_var=9.9</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-mid" href="file:///D%3A/tests/21748.jpg" target="_blank" title="D:\tests\21748.jpg" data-name="21748.jpg" data-path="D:\tests\21748.jpg" data-lap="72.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21748.jpg.jpg" alt="21748.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21748.jpg</b> · 2033×2919</span> · <span class="small">lap_var=72.4</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-strong" href="file:///D%3A/tests/21749.jpg" target="_blank" title="D:\tests\21749.jpg" data-name="21749.jpg" data-path="D:\tests\21749.jpg" data-lap="18.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21749.jpg.jpg" alt="21749.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21749.jpg</b> · 4752×3168</span> · <span class="small">lap_var=18.1</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-strong" href="file:///D%3A/tests/21750.jpg" target="_blank" title="D:\tests\21750.jpg" data-name="21750.jpg" data-path="D:\tests\21750.jpg" data-lap="27.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21750.jpg.jpg" alt="21750.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21750.jpg</b> · 1660×1920</span> · <span class="small">lap_var=27.6</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-mid" href="file:///D%3A/tests/21752.jpg" target="_blank" title="D:\tests\21752.jpg" data-name="21752.jpg" data-path="D:\tests\21752.jpg" data-lap="62.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21752.jpg.jpg" alt="21752.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21752.jpg</b> · 1280×1920</span> · <span class="small">lap_var=62.2</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-mid" href="file:///D%3A/tests/21753.jpg" target="_blank" title="D:\tests\21753.jpg" data-name="21753.jpg" data-path="D:\tests\21753.jpg" data-lap="47.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21753.jpg.jpg" alt="21753.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21753.jpg</b> · 1088×2070</span> · <span class="small">lap_var=47.8</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-mid" href="file:///D%3A/tests/21758.jpg" target="_blank" title="D:\tests\21758.jpg" data-name="21758.jpg" data-path="D:\tests\21758.jpg" data-lap="44.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21758.jpg.jpg" alt="21758.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21758.jpg</b> · 4032×3024</span> · <span class="small">lap_var=44.0</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-mid" href="file:///D%3A/tests/21761.jpg" target="_blank" title="D:\tests\21761.jpg" data-name="21761.jpg" data-path="D:\tests\21761.jpg" data-lap="42.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21761.jpg.jpg" alt="21761.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21761.jpg</b> · 4205×6307</span> · <span class="small">lap_var=42.9</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-strong" href="file:///D%3A/tests/21763.jpg" target="_blank" title="D:\tests\21763.jpg" data-name="21763.jpg" data-path="D:\tests\21763.jpg" data-lap="13.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21763.jpg.jpg" alt="21763.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21763.jpg</b> · 4032×3024</span> · <span class="small">lap_var=13.7</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-strong" href="file:///D%3A/tests/21764.jpg" target="_blank" title="D:\tests\21764.jpg" data-name="21764.jpg" data-path="D:\tests\21764.jpg" data-lap="13.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21764.jpg.jpg" alt="21764.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21764.jpg</b> · 4032×3024</span> · <span class="small">lap_var=13.5</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-strong" href="file:///D%3A/tests/21765.jpg" target="_blank" title="D:\tests\21765.jpg" data-name="21765.jpg" data-path="D:\tests\21765.jpg" data-lap="16.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21765.jpg.jpg" alt="21765.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21765.jpg</b> · 4032×3024</span> · <span class="small">lap_var=16.7</span></figcaption>
          </figure>
        </a>
        
        <a class="card candidate blur blur-strong" href="file:///D%3A/tests/21769.jpg" target="_blank" title="D:\tests\21769.jpg" data-name="21769.jpg" data-path="D:\tests\21769.jpg" data-lap="15.0">
          <figure>
            <img class="thumb" loading="lazy" src="report_assets/thumbs/21769.jpg.jpg" alt="21769.jpg">
            <figcaption><span class="badge cand">candidate</span><span class="kv"><b>21769.jpg</b> · 4032×3024</span> · <span class="small">lap_var=15.0</span></figcaption>
          </figure>
        </a>
        </div>
        

<script>
  // --- トグル（Visualに含まれるBlurを隠す）
  const cb=document.getElementById('toggleHide');
  cb?.addEventListener('change', ()=>{ document.body.classList.toggle('hide-in-visual', cb.checked); });

  // --- サムネサイズ切替
  for (const r of document.querySelectorAll('input[name="thumb"]')) {
    r.addEventListener('change', (e)=>{
      const v = e.target.value || "256";
      document.documentElement.style.setProperty('--thumb-size', v+'px');
    });
  }

  // --- 便利関数
  const q = (s, r=document)=>r.querySelector(s);
  const qa = (s, r=document)=>Array.from(r.querySelectorAll(s));

  // --- Blur セクションの並べ替え/フィルタ/検索
  const blurGrid = q('#blurGrid');

  function parseLap(el){
    const v = el.getAttribute('data-lap');
    const n = Number(v);
    return isNaN(n) ? Infinity : n;
  }
  function nameOf(el){
    return (el.getAttribute('data-name')||'').toLowerCase();
  }
  function pathOf(el){
    return (el.getAttribute('data-path')||'').toLowerCase();
  }

  function applySort(){
    const how = q('#blurSort').value;
    const items = qa('.card.blur', blurGrid);
    const keyFns = {
      lap_asc:  (a,b)=>parseLap(a)-parseLap(b),
      lap_desc: (a,b)=>parseLap(b)-parseLap(a),
      name_asc: (a,b)=>nameOf(a).localeCompare(nameOf(b)),
      name_desc:(a,b)=>nameOf(b).localeCompare(nameOf(a)),
      path_asc: (a,b)=>pathOf(a).localeCompare(pathOf(b)),
      path_desc:(a,b)=>pathOf(b).localeCompare(pathOf(a)),
    };
    items.sort(keyFns[how] || keyFns.lap_asc);
    for (const el of items) blurGrid.appendChild(el);
  }

  function applyFilter(){
    const maxStr = q('#blurMax').value.trim();
    const max = maxStr==='' ? null : Number(maxStr);
    const text = q('#search').value.trim().toLowerCase();
    qa('.card.blur', blurGrid).forEach(el=>{
      const lap = parseLap(el);
      const nm = nameOf(el);
      const p  = pathOf(el);
      const textOk = !text || nm.includes(text) || p.includes(text);
      const lapOk  = (max===null) || (lap <= max);
      el.style.display = (textOk && lapOk) ? '' : 'none';
    });
  }

  q('#blurSort').addEventListener('change', ()=>{ applySort(); });
  q('#blurMax').addEventListener('input', ()=>{ applyFilter(); });
  q('#search').addEventListener('input', ()=>{ applyFilter(); });
  q('#clearFilter').addEventListener('click', ()=>{
    q('#blurMax').value = '';
    q('#search').value = '';
    applyFilter();
  });

  // 初期適用
  applySort(); applyFilter();
</script>
</body></html>
